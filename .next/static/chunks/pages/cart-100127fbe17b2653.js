(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[190],{7671:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cart",function(){return s(2455)}])},2455:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return CartPage}});var n=s(5893),i=s(4279),a=s(7066),l=s(3299);function CartPage(){let{cart:e,remove:t,updateQty:s,clear:r,total:c}=(0,i.j)(),{data:d}=(0,l.useSession)();async function handleCheckout(){try{var t,s;let n=e.map(e=>({title:e.title,price:e.price,quantity:e.quantity})),i=await a.Z.post("/api/checkout/session",{items:n,successUrl:"".concat(window.location.origin,"/account/orders"),cancelUrl:window.location.href,userId:(null==d?void 0:null===(t=d.user)||void 0===t?void 0:t.id)||null});(null===(s=i.data)||void 0===s?void 0:s.url)?window.location=i.data.url:alert("Checkout failed")}catch(e){console.error(e),alert("Checkout error")}}return e.length?(0,n.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Cart"}),(0,n.jsx)("div",{className:"space-y-4",children:e.map(e=>{var i;return(0,n.jsxs)("div",{className:"flex items-center justify-between border p-3 rounded",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)("img",{src:null===(i=e.images)||void 0===i?void 0:i[0],className:"w-20 h-20 object-cover rounded"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"font-semibold",children:e.title}),(0,n.jsxs)("div",{children:["₹",(e.price/100).toFixed(2)]})]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("input",{type:"number",min:1,value:e.quantity,onChange:t=>s(e.id,Number(t.target.value)),className:"w-16 p-1 border rounded"}),(0,n.jsx)("button",{onClick:()=>t(e.id),className:"px-3 py-1 border rounded",children:"Remove"})]})]},e.id)})}),(0,n.jsxs)("div",{className:"mt-6 flex justify-between items-center",children:[(0,n.jsxs)("div",{className:"text-lg font-semibold",children:["Total: ₹",(c/100).toFixed(2)]}),(0,n.jsxs)("div",{className:"flex gap-3",children:[(0,n.jsx)("button",{onClick:()=>r(),className:"px-4 py-2 border rounded",children:"Clear"}),(0,n.jsx)("button",{onClick:handleCheckout,className:"px-4 py-2 bg-black text-white rounded",children:"Checkout"})]})]})]}):(0,n.jsx)("div",{className:"max-w-4xl mx-auto p-6",children:"Your cart is empty"})}}},function(e){e.O(0,[66,774,888,179],function(){return e(e.s=7671)}),_N_E=e.O()}]);